(this["webpackJsonpstudent-onshow-frontend"]=this["webpackJsonpstudent-onshow-frontend"]||[]).push([[0],{84:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n.n(r),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var i=n(22),s=n(135),l=n(0),u=n.n(l),j=n(11),d=n(121),h=n(19),b=n(122),p=n(116),f=n(123),m=n(124),O=n(48),g=n(125),x=n(126),v=n(119),y=n(137),w=n(20),S=n.n(w),k=n(33),C="http://localhost:3000",T=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SERVER_URL:""}).REACT_APP_GOOGLE_ANALYTICS,C+"/api/item"),A=function(){var e=Object(k.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(T,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(k.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(T),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(k.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(T,"/vote/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),W=n(138),I=n(112),N=n(5),L=n(3),P=Object(N.a)((function(){return Object(W.a)({progressWrapper:{minHeight:"-webkit-fill-available",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(L.jsx)("div",{className:t.progressWrapper,children:Object(L.jsx)(I.a,{})})})),D=n(118),F=n(117),R=n(120),z=Object(N.a)((function(e){var t=e.spacing;return Object(W.a)({wrapper:{padding:t(4),textAlign:"center",maxWidth:"800px",margin:"0 auto"},icon:{fontSize:"3em"},header:{display:"flex",flexDirection:"column-reverse",justifyContent:"center"},iconContainer:{textAlign:"center"}})}))((function(e){var t=e.message,n=void 0===t?void 0:t,r=e.classes,a=e.action,o=void 0===a?void 0:a,c=e.actionLabel,s=void 0===c?"Try Again":c;return Object(L.jsxs)(p.a,{elevation:3,className:r.wrapper,children:[Object(L.jsx)("div",{className:r.iconContainer,children:Object(L.jsx)(F.a,{color:"error",className:r.icon})}),Object(L.jsx)(D.a,{title:n||"There was a problem",className:r.header}),o?Object(L.jsx)(v.a,{className:r.iconContainer,variant:"contained",color:"secondary",endIcon:Object(L.jsx)(R.a,{}),onClick:o,children:s}):Object(L.jsx)(v.a,{component:i.b,to:"/",color:"primary",variant:"contained",children:"Home"})]})})),B=n(127),H=n(128),U=function(){var e=Object(l.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(l.useState)(!0),o=Object(h.a)(a,2),c=o[0],i=o[1],s=Object(l.useState)(""),j=Object(h.a)(s,2),w=j[0],S=j[1],k=Object(l.useState)(""),C=Object(h.a)(k,2),T=C[0],_=C[1],W=u.a.useState(""),I=Object(h.a)(W,2),N=I[0],D=I[1],F=Object(l.useCallback)((function(){A().then((function(e){i(!1),e.error?S(e.error):r(e.data)})).catch((function(e){i(!1),S("string"===typeof e?e:"Could not load items")}))}),[]);Object(l.useEffect)((function(){F()}),[F]);return c?Object(L.jsx)(P,{}):""!==w?Object(L.jsx)(z,{message:w,action:F}):Object(L.jsxs)(u.a.Fragment,{children:[Object(L.jsx)(d.a,{container:!0,spacing:2,children:n.length>0?n.map((function(e,t){return Object(L.jsx)(d.a,{item:!0,style:{width:400},children:Object(L.jsx)(b.a,{in:!0,style:{transitionDelay:"".concat(200*(t+1),"ms")},children:Object(L.jsxs)(p.a,{children:[Object(L.jsx)(f.a,{component:"iframe",style:{border:"none"},width:"400",height:"400",src:"https://editor.p5js.org/".concat(e.username,"/embed/").concat(e.link)}),Object(L.jsx)(m.a,{children:Object(L.jsx)(O.a,{gutterBottom:!0,variant:"h3",component:"h3",children:e.author})}),Object(L.jsx)(g.a,{disableSpacing:!0,children:localStorage.getItem("voted")&&localStorage.getItem("voted")===e._id||T===e._id?Object(L.jsx)(x.a,{"aria-label":"You have voted for this item",children:Object(L.jsx)(B.a,{})}):Object(L.jsx)(x.a,{"aria-label":"Vote for this item",onClick:function(){return t=e._id?e._id:e.link,void E(t).then((function(e){e.error&&D("Could not vote for item! "+e.error),_(e.data._id),localStorage.setItem("voted",e.data._id),D("Voted for item!")})).catch((function(e){D("string"===typeof e?e:"Could not vote for item")}));var t},children:Object(L.jsx)(H.a,{})})})]})})},e._id?e._id:e.link)})):Object(L.jsx)(d.a,{item:!0,sm:12,xs:12,children:Object(L.jsxs)(p.a,{children:[Object(L.jsx)(m.a,{children:Object(L.jsx)(O.a,{gutterBottom:!0,variant:"h3",component:"h3",children:"No Items Found"})}),Object(L.jsx)(g.a,{children:Object(L.jsx)(v.a,{variant:"contained",color:"secondary",endIcon:Object(L.jsx)(R.a,{}),onClick:F,children:"Try Again"})})]})})}),Object(L.jsx)(y.a,{open:""!==N,autoHideDuration:6e3,onClose:function(){return D("")},message:N})]})},K=n(130),M=n(131),V=n(132),Y=function(){return Object(L.jsx)(u.a.Fragment,{children:Object(L.jsx)(K.a,{position:"sticky",children:Object(L.jsxs)(M.a,{style:{justifyContent:"space-between"},children:[Object(L.jsx)(x.a,{"aria-label":"Home",component:i.b,to:"/",children:Object(L.jsx)(V.a,{})}),!localStorage.getItem("existing")&&Object(L.jsx)(v.a,{component:i.b,to:"/add",children:"Add"})]})})})},G=n(136),J=n(133),q=n(134),$=[{name:"Add",link:"/add",component:Object(N.a)((function(e){var t=e.spacing;return Object(W.a)({wrapper:{padding:t(4)},error:{display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.history,n=e.classes,r=Object(l.useState)(""),a=Object(h.a)(r,2),o=a[0],c=a[1],s=Object(l.useState)(""),j=Object(h.a)(s,2),d=j[0],b=j[1],f=Object(l.useState)(""),x=Object(h.a)(f,2),y=x[0],w=x[1],S=Object(l.useState)(""),k=Object(h.a)(S,2),C=k[0],T=k[1],A=Object(l.useState)(!1),E=Object(h.a)(A,2),W=E[0],N=E[1],P=Object(l.useState)(""),R=Object(h.a)(P,2),B=R[0],H=R[1],U=function(){if(function(){var e=!0;return o.length<5?(b("Author must be at least 5 characters"),e=!1):b(""),y.length<5?(T("Link must be at least 5 characters"),e=!1):T(""),e}()){var e,n;if(N(!0),y.includes("iframe")){var r=y.split('src="')[1].split('">')[0].split(".org/")[1].split("/embed/");e=r[0],n=r[1]}else{var a=y.split(".org/")[1].split("/");e=a[0],n=a[2]}_({author:o,username:e,link:n}).then((function(e){if(!e||e.error)return N(!1),H(e&&e.error?e.error:"Could not create portfolio item");localStorage.setItem("existing","true"),t.push("/")}))}};return localStorage.getItem("existing")?Object(L.jsx)(z,{message:"You have already added a portfolio item"}):Object(L.jsxs)(u.a.Fragment,{children:[Object(L.jsx)(v.a,{component:i.b,to:"/",startIcon:Object(L.jsx)(J.a,{}),children:"Back"}),Object(L.jsxs)(p.a,{elevation:3,className:n.wrapper,children:[Object(L.jsx)(D.a,{author:"Create Portfolio Item"}),Object(L.jsxs)(m.a,{children:[Object(L.jsx)(G.a,{name:"author",label:"Author",autoFocus:!0,margin:"normal",value:o,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&U()},error:""!==d,helperText:d}),Object(L.jsx)(G.a,{name:"link",label:"Link",margin:"normal",value:y,onChange:function(e){return w(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&U()},error:""!==C,helperText:C,multiline:!0})]}),Object(L.jsx)("br",{}),""!==B&&Object(L.jsxs)(O.a,{component:"p",className:n.error,color:"error",style:{textAlign:"center"},children:[Object(L.jsx)(F.a,{color:"error"}),B]}),Object(L.jsx)(g.a,{children:Object(L.jsx)(v.a,{color:"secondary",variant:"contained",onClick:U,disabled:W,endIcon:W?Object(L.jsx)(I.a,{size:18}):Object(L.jsx)(q.a,{}),children:"Create"})})]})]})})),authed:!1}],Q=function(){var e=Object(j.f)();return Object(L.jsxs)(u.a.Fragment,{children:[Object(L.jsx)(Y,{}),Object(L.jsx)(d.a,{container:!0,justify:"center",style:{marginTop:"20px",marginBottom:"20px"},children:Object(L.jsx)(d.a,{item:!0,xs:11,children:Object(L.jsx)(l.Suspense,{fallback:Object(L.jsx)(P,{}),children:Object(L.jsxs)(j.c,{children:[Object(L.jsx)(j.a,{exact:!0,path:"/",component:U}),$.map((function(t,n){var r=t.link,a=t.component;return t.authed?Object(L.jsx)(j.a,{render:function(){return Object(L.jsx)(z,{message:"You need to be logged in to view this page",action:function(){return e.push("/login")},actionLabel:"Login"})}},n):Object(L.jsx)(j.a,{path:r,component:a},n)})),Object(L.jsx)(j.a,{render:function(){return Object(L.jsx)(z,{message:"The page you are looking for does not exist"})}})]})})})})]})},X=n(62),Z=n(139),ee=Object(X.a)({palette:{primary:{main:"#ff9100"},secondary:{main:"#42a5f5"}},typography:{fontFamily:["quicksand","sans-serif"].join(","),h1:{fontWeight:800,fontSize:"3.052rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h2:{fontWeight:700,fontSize:"2.441rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h3:{fontWeight:700,fontSize:"1.953rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h4:{fontWeight:700,fontSize:"1.563rem",margin:"3rem 0 1.38rem",color:"#4e4e4e"},h5:{fontWeight:700,fontSize:"1.25rem",color:"#4e4e4e"}},overrides:{MuiTextField:{root:{width:"100%",margin:"16px auto"}},MuiListItemText:{root:{display:"flex",flexDirection:"column-reverse"}},MuiCard:{root:{textAlign:"center"}},MuiCardActions:{root:{justifyContent:"center"}}}}),te=ee=Object(Z.a)(ee),ne=function(){return Object(L.jsx)(i.a,{children:Object(L.jsx)(s.a,{theme:te,children:Object(L.jsx)(Q,{})})})};a.a.render(Object(L.jsx)(ne,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):c(t,e)}))}}()}},[[84,1,2]]]);
//# sourceMappingURL=main.2111c365.chunk.js.map